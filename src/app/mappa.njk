{% extends 'layouts/default.njk' %}

{% block body_class %}page--mappa{% endblock %}

{% block content %}
  <div class="text-center appContent">
    <h1 class="display-4 pb-2">flora2117 in Isola Milano</h1>
    {# <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem</p> #}
    {# <div class="embed-responsive embed-responsive-16by9">
      <iframe class="embed-responsive-item" src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d5594.26046387902!2d9.189638349667561!3d45.48732216334307!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sit!4v1487174892922" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
    </div> #}
    {# <div class="embed-responsive embed-responsive-16by9">
      <iframe class="embed-responsive-item" src="http://www.openstreetmap.org/export/embed.html?bbox=9.188888669013979%2C45.48682019089301%2C9.195969700813295%2C45.49024998197622&amp;layer=mapnik" width="100%" height="450" frameborder="0" scrolling="no" allowfullscreen></iframe><br><a class="text-muted" href="http://www.openstreetmap.org/#map=18/45.48854/9.19243&amp;layers=N"><small>Guarda mappa in grande</small></a>
    </div> #}
    <div class="embed-responsive embed-responsive-16by9">
      <div id="appMap"></div>
    </div>
  </div>
{% endblock %}

{% block body_end %}
<script>
(function (lib, api) {
  var map = api.map;

  {% for plant in common.plants -%}
  lib.marker([{{ plant.map.x }}, {{ plant.map.y }}], {
      icon: new api.mapIcon({ iconUrl: 'images/{{ plant.map.icon }}.png'})
    })
    .bindPopup('<a href="/piante.html#{{ plant.slug }}"><h3>{{ plant.name }}</h3><img class="img-fluid" src="images/{{ plant.img.path }}"></a>')
    .addTo(map);
  {% endfor %}
})(window['L'], window['flora2117']);
</script>
{% endblock %}
